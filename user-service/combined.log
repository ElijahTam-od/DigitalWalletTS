{"level":"info","message":"Using MailHog for email testing","service":"user-service","timestamp":"2024-08-28 04:02:30"}
{"level":"info","message":"Email templates loaded successfully","service":"user-service","timestamp":"2024-08-28 04:02:30"}
{"code":"EDNS","command":"CONN","errno":-3008,"hostname":"mailhog","level":"error","message":"Error sending email: getaddrinfo ENOTFOUND mailhog","service":"user-service","stack":"Error: getaddrinfo ENOTFOUND mailhog\n    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:118:26)","syscall":"getaddrinfo","timestamp":"2024-08-28 04:06:07"}
{"0":"v","1":"e","10":"o","11":"n","2":"r","3":"i","4":"f","5":"i","6":"c","7":"a","8":"t","9":"i","level":"error","message":"Template name:","service":"user-service","timestamp":"2024-08-28 04:06:07"}
{"firstName":"Elijah","level":"error","message":"Context:","service":"user-service","timestamp":"2024-08-28 04:06:07","verificationLink":"http://localhost:3000/api/auth/verify-email/5f13c4d6b1d6870a928ba5c8518d17c3ef268ef2"}
{"level":"error","message":"Error sending verification email to test@gmail.com: Failed to send email notification: getaddrinfo ENOTFOUND mailhog","service":"user-service","stack":"Error: Failed to send email notification: getaddrinfo ENOTFOUND mailhog\n    at NotificationService.sendEmail (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\service\\notification.service.ts:102:10)\n    at async NotificationService.notifyEmailVerification (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\service\\notification.service.ts:108:4)\n    at async AuthService.register (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\service\\auth.service.ts:56:13)\n    at async AuthController.register (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\controller\\auth.controller.ts:15:22)","timestamp":"2024-08-28 04:06:07"}
{"level":"info","message":"Verification email sent successfully to test@gmail.com","service":"user-service","timestamp":"2024-08-28 04:06:07"}
{"level":"info","message":"Using MailHog for email testing","service":"user-service","timestamp":"2024-08-28 04:20:01"}
{"level":"info","message":"Email templates loaded successfully","service":"user-service","timestamp":"2024-08-28 04:20:01"}
{"code":"EDNS","command":"CONN","errno":-3008,"hostname":"mailhog","level":"error","message":"Error sending email: getaddrinfo ENOTFOUND mailhog","service":"user-service","stack":"Error: getaddrinfo ENOTFOUND mailhog\n    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:118:26)","syscall":"getaddrinfo","timestamp":"2024-08-28 04:20:13"}
{"0":"v","1":"e","10":"o","11":"n","2":"r","3":"i","4":"f","5":"i","6":"c","7":"a","8":"t","9":"i","level":"error","message":"Template name:","service":"user-service","timestamp":"2024-08-28 04:20:13"}
{"firstName":"Elijah","level":"error","message":"Context:","service":"user-service","timestamp":"2024-08-28 04:20:13","verificationLink":"http://localhost:3000/api/auth/verify-email/f38a57dc19c09eaf2de044cef0fdc4453f4b36af"}
{"level":"error","message":"Error sending verification email to test1@gmail.com: Failed to send email notification: getaddrinfo ENOTFOUND mailhog","service":"user-service","stack":"Error: Failed to send email notification: getaddrinfo ENOTFOUND mailhog\n    at NotificationService.sendEmail (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\service\\notification.service.ts:102:10)\n    at async NotificationService.notifyEmailVerification (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\service\\notification.service.ts:108:4)\n    at async AuthService.register (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\service\\auth.service.ts:56:13)\n    at async AuthController.register (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\controller\\auth.controller.ts:15:22)","timestamp":"2024-08-28 04:20:13"}
{"level":"info","message":"Verification email sent successfully to test1@gmail.com","service":"user-service","timestamp":"2024-08-28 04:20:13"}
{"level":"info","message":"Using MailHog for email testing","service":"user-service","timestamp":"2024-08-28 04:24:24"}
{"level":"info","message":"Email templates loaded successfully","service":"user-service","timestamp":"2024-08-28 04:24:24"}
{"level":"info","message":"Email sent to test2@gmail.com using template verification","service":"user-service","timestamp":"2024-08-28 04:24:53"}
{"level":"info","message":"Verification email sent successfully to test2@gmail.com","service":"user-service","timestamp":"2024-08-28 04:24:53"}
{"level":"info","message":"Verification email sent successfully to test2@gmail.com","service":"user-service","timestamp":"2024-08-28 04:24:53"}
{"0":"U","1":"s","10":"d","11":"y","12":" ","13":"e","14":"x","15":"i","16":"s","17":"t","18":"s","2":"e","3":"r","4":" ","5":"a","6":"l","7":"r","8":"e","9":"a","level":"error","message":"Error in user registration:","service":"user-service","timestamp":"2024-08-28 04:34:54"}
{"level":"info","message":"Email sent to test3@gmail.com using template verification","service":"user-service","timestamp":"2024-08-28 04:34:59"}
{"level":"info","message":"Verification email sent successfully to test3@gmail.com","service":"user-service","timestamp":"2024-08-28 04:34:59"}
{"level":"info","message":"Verification email sent successfully to test3@gmail.com","service":"user-service","timestamp":"2024-08-28 04:34:59"}
{"0":"P","1":"l","10":"i","11":"f","12":"y","13":" ","14":"y","15":"o","16":"u","17":"r","18":" ","19":"e","2":"e","20":"m","21":"a","22":"i","23":"l","24":" ","25":"b","26":"e","27":"f","28":"o","29":"r","3":"a","30":"e","31":" ","32":"l","33":"o","34":"g","35":"g","36":"i","37":"n","38":"g","39":" ","4":"s","40":"i","41":"n","42":".","43":" ","44":"C","45":"h","46":"e","47":"c","48":"k","49":" ","5":"e","50":"y","51":"o","52":"u","53":"r","54":" ","55":"i","56":"n","57":"b","58":"o","59":"x","6":" ","60":" ","61":"f","62":"o","63":"r","64":" ","65":"t","66":"h","67":"e","68":" ","69":"v","7":"v","70":"e","71":"r","72":"i","73":"f","74":"i","75":"c","76":"a","77":"t","78":"i","79":"o","8":"e","80":"n","81":" ","82":"l","83":"i","84":"n","85":"k","86":".","9":"r","level":"error","message":"Error in user login:","service":"user-service","timestamp":"2024-08-28 04:35:39"}
{"level":"info","message":"Using MailHog for email testing","service":"user-service","timestamp":"2024-08-28 05:09:23"}
{"level":"info","message":"Email templates loaded successfully","service":"user-service","timestamp":"2024-08-28 05:09:23"}
{"level":"info","message":"Using MailHog for email testing","service":"user-service","timestamp":"2024-08-28 05:11:33"}
{"level":"info","message":"Email templates loaded successfully","service":"user-service","timestamp":"2024-08-28 05:11:33"}
{"level":"info","message":"Using MailHog for email testing","service":"user-service","timestamp":"2024-08-28 05:17:28"}
{"level":"info","message":"Email templates loaded successfully","service":"user-service","timestamp":"2024-08-28 05:17:28"}
{"0":"P","1":"l","10":"i","11":"f","12":"y","13":" ","14":"y","15":"o","16":"u","17":"r","18":" ","19":"e","2":"e","20":"m","21":"a","22":"i","23":"l","24":" ","25":"b","26":"e","27":"f","28":"o","29":"r","3":"a","30":"e","31":" ","32":"l","33":"o","34":"g","35":"g","36":"i","37":"n","38":"g","39":" ","4":"s","40":"i","41":"n","42":".","43":" ","44":"C","45":"h","46":"e","47":"c","48":"k","49":" ","5":"e","50":"y","51":"o","52":"u","53":"r","54":" ","55":"i","56":"n","57":"b","58":"o","59":"x","6":" ","60":" ","61":"f","62":"o","63":"r","64":" ","65":"t","66":"h","67":"e","68":" ","69":"v","7":"v","70":"e","71":"r","72":"i","73":"f","74":"i","75":"c","76":"a","77":"t","78":"i","79":"o","8":"e","80":"n","81":" ","82":"l","83":"i","84":"n","85":"k","86":".","9":"r","level":"error","message":"Error in user login:","service":"user-service","timestamp":"2024-08-28 05:19:11"}
{"level":"info","message":"Using MailHog for email testing","service":"user-service","timestamp":"2024-08-28 05:25:19"}
{"level":"info","message":"Email templates loaded successfully","service":"user-service","timestamp":"2024-08-28 05:25:19"}
{"0":"A","1":"n","10":"s","11":"e","12":"r","13":" ","14":"a","15":"l","16":"r","17":"e","18":"a","19":"d","2":" ","20":"y","21":" ","22":"e","23":"x","24":"i","25":"s","26":"t","27":"s","3":"a","4":"d","5":"m","6":"i","7":"n","8":" ","9":"u","level":"error","message":"Error in admin setup:","service":"user-service","timestamp":"2024-08-28 05:25:29"}
{"level":"info","message":"Email sent to admintest@gmail.com using template verification","service":"user-service","timestamp":"2024-08-28 05:29:02"}
{"level":"info","message":"Verification email sent successfully to admintest@gmail.com","service":"user-service","timestamp":"2024-08-28 05:29:02"}
{"level":"info","message":"Email sent to createadmintest@gmail.com using template verification","service":"user-service","timestamp":"2024-08-28 05:29:44"}
{"level":"info","message":"Verification email sent successfully to createadmintest@gmail.com","service":"user-service","timestamp":"2024-08-28 05:29:44"}
{"level":"info","message":"Using MailHog for email testing","service":"user-service","timestamp":"2024-08-28 06:41:55"}
{"level":"info","message":"Email templates loaded successfully","service":"user-service","timestamp":"2024-08-28 06:41:55"}
{"level":"info","message":"Using MailHog for email testing","service":"user-service","timestamp":"2024-08-28 07:07:28"}
{"level":"info","message":"Email templates loaded successfully","service":"user-service","timestamp":"2024-08-28 07:07:28"}
{"level":"info","message":"KYC initiated for user 66ce451df48c43557b817c09. Auto-approve: false","service":"user-service","timestamp":"2024-08-28 07:08:13"}
{"level":"info","message":"File saved locally at C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\uploads\\66ce451df48c43557b817c09_identity_1724800093071.pdf","service":"user-service","timestamp":"2024-08-28 07:08:13"}
{"level":"info","message":"Document uploaded successfully for user 66ce451df48c43557b817c09","service":"user-service","timestamp":"2024-08-28 07:08:13"}
{"level":"info","message":"Using MailHog for email testing","service":"user-service","timestamp":"2024-08-28 07:28:03"}
{"level":"info","message":"Email templates loaded successfully","service":"user-service","timestamp":"2024-08-28 07:28:03"}
{"code":"ETIMEDOUT","command":"CONN","level":"error","message":"Error sending email: Greeting never received","service":"user-service","stack":"Error: Greeting never received\n    at SMTPConnection._formatError (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\node_modules\\nodemailer\\lib\\smtp-connection\\index.js:798:19)\n    at SMTPConnection._onError (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\node_modules\\nodemailer\\lib\\smtp-connection\\index.js:784:20)\n    at Timeout.<anonymous> (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\node_modules\\nodemailer\\lib\\smtp-connection\\index.js:718:22)\n    at listOnTimeout (node:internal/timers:573:17)\n    at processTimers (node:internal/timers:514:7)","timestamp":"2024-08-28 07:28:54"}
{"0":"v","1":"e","10":"o","11":"n","2":"r","3":"i","4":"f","5":"i","6":"c","7":"a","8":"t","9":"i","level":"error","message":"Template name:","service":"user-service","timestamp":"2024-08-28 07:28:54"}
{"firstName":"Elijah","level":"error","message":"Context:","service":"user-service","timestamp":"2024-08-28 07:28:54","verificationLink":"http://localhost:3000/api/auth/verify-email/c118612ecd04eadbe970c6aba5cc981dd2a3f048"}
{"level":"error","message":"Error sending verification email to test4@gmail.com: Failed to send email notification: Greeting never received","service":"user-service","stack":"Error: Failed to send email notification: Greeting never received\n    at NotificationService.sendEmail (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\service\\notification.service.ts:102:10)\n    at async NotificationService.notifyEmailVerification (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\service\\notification.service.ts:108:4)\n    at async AuthService.register (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\service\\auth.service.ts:58:13)\n    at async AuthController.register (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\controller\\auth.controller.ts:16:22)","timestamp":"2024-08-28 07:28:54"}
{"level":"info","message":"Using MailHog for email testing","service":"user-service","timestamp":"2024-08-28 07:29:45"}
{"level":"info","message":"Email templates loaded successfully","service":"user-service","timestamp":"2024-08-28 07:29:46"}
{"level":"info","message":"Email sent to test5@gmail.com using template verification","service":"user-service","timestamp":"2024-08-28 07:30:38"}
{"level":"info","message":"Verification email sent successfully to test5@gmail.com","service":"user-service","timestamp":"2024-08-28 07:30:38"}
{"level":"info","message":"KYC initiated for user 66ce619d4e2d45657eaf97af. Auto-approve: false","service":"user-service","timestamp":"2024-08-28 07:31:31"}
{"level":"info","message":"Document uploaded and stored as Base64 for user 66ce619d4e2d45657eaf97af","service":"user-service","timestamp":"2024-08-28 07:31:31"}
{"level":"info","message":"Document uploaded and stored as Base64 for user 66ce619d4e2d45657eaf97af","service":"user-service","timestamp":"2024-08-28 07:33:42"}
{"level":"info","message":"Using MailHog for email testing","service":"user-service","timestamp":"2024-08-28 07:38:43"}
{"level":"info","message":"Email templates loaded successfully","service":"user-service","timestamp":"2024-08-28 07:38:43"}
{"level":"info","message":"Document uploaded and stored as Base64 for user 66ce619d4e2d45657eaf97af","service":"user-service","timestamp":"2024-08-28 07:39:00"}
{"level":"info","message":"Document uploaded and stored as Base64 for user 66ce619d4e2d45657eaf97af","service":"user-service","timestamp":"2024-08-28 07:39:58"}
{"level":"info","message":"Using MailHog for email testing","service":"user-service","timestamp":"2024-08-28 09:24:39"}
{"level":"info","message":"Email templates loaded successfully","service":"user-service","timestamp":"2024-08-28 09:24:39"}
{"level":"info","message":"Email sent to sirlalapyon1@gmail.com using template verification","service":"user-service","timestamp":"2024-08-28 09:25:08"}
{"level":"info","message":"Verification email sent successfully to sirlalapyon1@gmail.com","service":"user-service","timestamp":"2024-08-28 09:25:08"}
{"0":"I","1":"n","10":"a","11":"i","12":"l","13":" ","14":"o","15":"r","16":" ","17":"p","18":"a","19":"s","2":"v","20":"s","21":"w","22":"o","23":"r","24":"d","3":"a","4":"l","5":"i","6":"d","7":" ","8":"e","9":"m","level":"error","message":"Error in user login:","service":"user-service","timestamp":"2024-08-28 09:25:44"}
{"0":"I","1":"n","10":"a","11":"i","12":"l","13":" ","14":"o","15":"r","16":" ","17":"p","18":"a","19":"s","2":"v","20":"s","21":"w","22":"o","23":"r","24":"d","3":"a","4":"l","5":"i","6":"d","7":" ","8":"e","9":"m","level":"error","message":"Error in user login:","service":"user-service","timestamp":"2024-08-28 09:26:13"}
{"level":"info","message":"Email sent to admintest@gmail.com using template verification","service":"user-service","timestamp":"2024-08-28 09:27:05"}
{"level":"info","message":"Verification email sent successfully to admintest@gmail.com","service":"user-service","timestamp":"2024-08-28 09:27:05"}
{"0":"P","1":"l","10":"i","11":"f","12":"y","13":" ","14":"y","15":"o","16":"u","17":"r","18":" ","19":"e","2":"e","20":"m","21":"a","22":"i","23":"l","24":" ","25":"b","26":"e","27":"f","28":"o","29":"r","3":"a","30":"e","31":" ","32":"l","33":"o","34":"g","35":"g","36":"i","37":"n","38":"g","39":" ","4":"s","40":"i","41":"n","42":".","43":" ","44":"C","45":"h","46":"e","47":"c","48":"k","49":" ","5":"e","50":"y","51":"o","52":"u","53":"r","54":" ","55":"i","56":"n","57":"b","58":"o","59":"x","6":" ","60":" ","61":"f","62":"o","63":"r","64":" ","65":"t","66":"h","67":"e","68":" ","69":"v","7":"v","70":"e","71":"r","72":"i","73":"f","74":"i","75":"c","76":"a","77":"t","78":"i","79":"o","8":"e","80":"n","81":" ","82":"l","83":"i","84":"n","85":"k","86":".","9":"r","level":"error","message":"Error in user login:","service":"user-service","timestamp":"2024-08-28 09:28:36"}
{"level":"info","message":"Using MailHog for email testing","service":"user-service","timestamp":"2024-08-28 09:46:31"}
{"level":"info","message":"Email templates loaded successfully","service":"user-service","timestamp":"2024-08-28 09:46:32"}
{"level":"info","message":"Using MailHog for email testing","service":"user-service","timestamp":"2024-08-28 09:48:56"}
{"level":"info","message":"Email templates loaded successfully","service":"user-service","timestamp":"2024-08-28 09:48:57"}
{"level":"error","message":"Error in createWallet: KYC verification is not approved. Cannot create wallet.","service":"user-service","stack":"Error: KYC verification is not approved. Cannot create wallet.\n    at Function.createWallet (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\service\\wallet.service.ts:55:11)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async WalletController.createWallet (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\controller\\wallet.controller.ts:18:19)","timestamp":"2024-08-28 09:49:03"}
{"level":"error","message":"Error in createWallet: KYC verification is not approved. Cannot create wallet.","service":"user-service","stack":"Error: KYC verification is not approved. Cannot create wallet.\n    at Function.createWallet (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\service\\wallet.service.ts:55:11)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async WalletController.createWallet (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\controller\\wallet.controller.ts:18:19)","timestamp":"2024-08-28 09:49:27"}
{"level":"info","message":"KYC initiated for user 66ce7ce9eb301cafb0727db9. Auto-approve: false","service":"user-service","timestamp":"2024-08-28 09:50:34"}
{"level":"info","message":"Document uploaded and stored as Base64 for user 66ce7ce9eb301cafb0727db9","service":"user-service","timestamp":"2024-08-28 09:50:35"}
{"level":"error","message":"Error creating Stripe customer: You did not provide an API key. You need to provide your API key in the Authorization header, using Bearer auth (e.g. 'Authorization: Bearer YOUR_SECRET_KEY'). See https://stripe.com/docs/api#authentication for details, or we can help at https://support.stripe.com/.","service":"user-service","timestamp":"2024-08-28 09:51:23"}
{"level":"error","message":"Error in createWallet: Failed to create Stripe customer: You did not provide an API key. You need to provide your API key in the Authorization header, using Bearer auth (e.g. 'Authorization: Bearer YOUR_SECRET_KEY'). See https://stripe.com/docs/api#authentication for details, or we can help at https://support.stripe.com/.","service":"user-service","stack":"Error: Failed to create Stripe customer: You did not provide an API key. You need to provide your API key in the Authorization header, using Bearer auth (e.g. 'Authorization: Bearer YOUR_SECRET_KEY'). See https://stripe.com/docs/api#authentication for details, or we can help at https://support.stripe.com/.\n    at Function.createCustomer (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\service\\stripe.service.ts:24:10)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Function.createWallet (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\service\\wallet.service.ts:64:27)\n    at async WalletController.createWallet (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\controller\\wallet.controller.ts:18:19)","timestamp":"2024-08-28 09:51:23"}
{"level":"info","message":"Using MailHog for email testing","service":"user-service","timestamp":"2024-08-28 09:55:09"}
{"level":"info","message":"Email templates loaded successfully","service":"user-service","timestamp":"2024-08-28 09:55:09"}
{"level":"info","message":"Created Stripe customer for email: admintest@gmail.com","service":"user-service","timestamp":"2024-08-28 09:55:40"}
{"level":"info","message":"Transaction created: 66ce839c464cb906ddfee7c8","service":"user-service","timestamp":"2024-08-28 09:55:40"}
{"level":"info","message":"Wallet created for user 66ce7ce9eb301cafb0727db9 with initial balance 1000","service":"user-service","timestamp":"2024-08-28 09:55:40"}
{"level":"info","message":"Payment method pm_card_mastercard already exists for user 66ce7ce9eb301cafb0727db9","service":"user-service","timestamp":"2024-08-28 10:20:57"}
{"level":"error","message":"Error in deposit: Payment method not found or does not belong to this user","service":"user-service","stack":"Error: Payment method not found or does not belong to this user\n    at Function.deposit (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\service\\wallet.service.ts:105:11)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async WalletController.deposit (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\controller\\wallet.controller.ts:250:19)","timestamp":"2024-08-28 10:25:21"}
{"level":"info","message":"Attached payment method pm_card_mastercard to customer cus_Qk5HycccQCbH4o","service":"user-service","timestamp":"2024-08-28 10:38:01"}
{"level":"info","message":"Creating PaymentIntent: amount=100000, currency=usd, customerId=cus_Qk5HycccQCbH4o, paymentMethodId=undefined","service":"user-service","timestamp":"2024-08-28 10:38:37"}
{"level":"info","message":"PaymentIntent created: {\"id\":\"pi_3PsbmKRovDgm5eik1q36HReY\",\"object\":\"payment_intent\",\"amount\":10000000,\"amount_capturable\":0,\"amount_details\":{\"tip\":{}},\"amount_received\":0,\"application\":null,\"application_fee_amount\":null,\"automatic_payment_methods\":{\"allow_redirects\":\"always\",\"enabled\":true},\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic_async\",\"client_secret\":\"pi_3PsbmKRovDgm5eik1q36HReY_secret_eFyclDwMfjvCgVHIiHWXywTLh\",\"confirmation_method\":\"automatic\",\"created\":1724812716,\"currency\":\"usd\",\"customer\":\"cus_Qk5HycccQCbH4o\",\"description\":null,\"invoice\":null,\"last_payment_error\":null,\"latest_charge\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":null,\"payment_method_configuration_details\":null,\"payment_method_options\":{\"card\":{\"installments\":null,\"mandate_options\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"processing\":null,\"receipt_email\":null,\"review\":null,\"setup_future_usage\":\"off_session\",\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"requires_payment_method\",\"transfer_data\":null,\"transfer_group\":null}","service":"user-service","timestamp":"2024-08-28 10:38:38"}
{"level":"error","message":"Error confirming PaymentIntent: A `return_url` must be specified because this Payment Intent is configured to automatically accept the payment methods enabled in the Dashboard, some of which may require a full page redirect to succeed. If you do not want to accept redirect-based payment methods, set `automatic_payment_methods[enabled]` to `true` and `automatic_payment_methods[allow_redirects]` to `never` when creating Setup Intents and Payment Intents.","service":"user-service","timestamp":"2024-08-28 10:38:39"}
{"level":"error","message":"Error in deposit: Failed to confirm PaymentIntent: A `return_url` must be specified because this Payment Intent is configured to automatically accept the payment methods enabled in the Dashboard, some of which may require a full page redirect to succeed. If you do not want to accept redirect-based payment methods, set `automatic_payment_methods[enabled]` to `true` and `automatic_payment_methods[allow_redirects]` to `never` when creating Setup Intents and Payment Intents.","service":"user-service","stack":"Error: Failed to confirm PaymentIntent: A `return_url` must be specified because this Payment Intent is configured to automatically accept the payment methods enabled in the Dashboard, some of which may require a full page redirect to succeed. If you do not want to accept redirect-based payment methods, set `automatic_payment_methods[enabled]` to `true` and `automatic_payment_methods[allow_redirects]` to `never` when creating Setup Intents and Payment Intents.\n    at Function.confirmPaymentIntent (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\service\\stripe.service.ts:69:10)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Function.deposit (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\service\\wallet.service.ts:115:20)\n    at async WalletController.deposit (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\controller\\wallet.controller.ts:250:19)","timestamp":"2024-08-28 10:38:39"}
{"level":"info","message":"Using MailHog for email testing","service":"user-service","timestamp":"2024-08-28 10:45:36"}
{"level":"info","message":"Email templates loaded successfully","service":"user-service","timestamp":"2024-08-28 10:45:37"}
{"level":"info","message":"Creating PaymentIntent: amount=100000, currency=usd, customerId=cus_Qk5HycccQCbH4o, paymentMethodId=undefined","service":"user-service","timestamp":"2024-08-28 10:45:59"}
{"level":"error","message":"Error creating PaymentIntent: You cannot confirm this PaymentIntent because it's missing a payment method. You can either update the PaymentIntent with a payment method and then confirm it again, or confirm it again directly with a payment method or ConfirmationToken.","service":"user-service","timestamp":"2024-08-28 10:45:59"}
{"level":"error","message":"Error in deposit: Failed to create PaymentIntent: You cannot confirm this PaymentIntent because it's missing a payment method. You can either update the PaymentIntent with a payment method and then confirm it again, or confirm it again directly with a payment method or ConfirmationToken.","service":"user-service","stack":"Error: Failed to create PaymentIntent: You cannot confirm this PaymentIntent because it's missing a payment method. You can either update the PaymentIntent with a payment method and then confirm it again, or confirm it again directly with a payment method or ConfirmationToken.\n    at Function.createPaymentIntent (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\service\\stripe.service.ts:55:10)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Function.deposit (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\service\\wallet.service.ts:109:20)\n    at async WalletController.deposit (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\controller\\wallet.controller.ts:250:19)","timestamp":"2024-08-28 10:45:59"}
{"level":"info","message":"Creating PaymentIntent: amount=100000, currency=usd, customerId=cus_Qk5HycccQCbH4o, paymentMethodId=undefined","service":"user-service","timestamp":"2024-08-28 10:48:18"}
{"level":"error","message":"Error creating PaymentIntent: You cannot confirm this PaymentIntent because it's missing a payment method. You can either update the PaymentIntent with a payment method and then confirm it again, or confirm it again directly with a payment method or ConfirmationToken.","service":"user-service","timestamp":"2024-08-28 10:48:19"}
{"level":"error","message":"Error in deposit: Failed to create PaymentIntent: You cannot confirm this PaymentIntent because it's missing a payment method. You can either update the PaymentIntent with a payment method and then confirm it again, or confirm it again directly with a payment method or ConfirmationToken.","service":"user-service","stack":"Error: Failed to create PaymentIntent: You cannot confirm this PaymentIntent because it's missing a payment method. You can either update the PaymentIntent with a payment method and then confirm it again, or confirm it again directly with a payment method or ConfirmationToken.\n    at Function.createPaymentIntent (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\service\\stripe.service.ts:55:10)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Function.deposit (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\service\\wallet.service.ts:109:20)\n    at async WalletController.deposit (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\controller\\wallet.controller.ts:250:19)","timestamp":"2024-08-28 10:48:19"}
{"level":"info","message":"Attached payment method pm_card_mastercard to customer cus_Qk5HycccQCbH4o","service":"user-service","timestamp":"2024-08-28 10:49:09"}
{"level":"info","message":"Creating PaymentIntent: amount=100000, currency=usd, customerId=cus_Qk5HycccQCbH4o, paymentMethodId=undefined","service":"user-service","timestamp":"2024-08-28 10:49:24"}
{"level":"error","message":"Error creating PaymentIntent: You cannot confirm this PaymentIntent because it's missing a payment method. You can either update the PaymentIntent with a payment method and then confirm it again, or confirm it again directly with a payment method or ConfirmationToken.","service":"user-service","timestamp":"2024-08-28 10:49:24"}
{"level":"error","message":"Error in deposit: Failed to create PaymentIntent: You cannot confirm this PaymentIntent because it's missing a payment method. You can either update the PaymentIntent with a payment method and then confirm it again, or confirm it again directly with a payment method or ConfirmationToken.","service":"user-service","stack":"Error: Failed to create PaymentIntent: You cannot confirm this PaymentIntent because it's missing a payment method. You can either update the PaymentIntent with a payment method and then confirm it again, or confirm it again directly with a payment method or ConfirmationToken.\n    at Function.createPaymentIntent (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\service\\stripe.service.ts:55:10)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Function.deposit (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\service\\wallet.service.ts:109:20)\n    at async WalletController.deposit (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\controller\\wallet.controller.ts:250:19)","timestamp":"2024-08-28 10:49:24"}
{"level":"info","message":"Using MailHog for email testing","service":"user-service","timestamp":"2024-08-28 10:50:11"}
{"level":"info","message":"Email templates loaded successfully","service":"user-service","timestamp":"2024-08-28 10:50:11"}
{"level":"info","message":"Creating PaymentIntent: amount=100000, currency=usd, customerId=cus_Qk5HycccQCbH4o, paymentMethodId=undefined","service":"user-service","timestamp":"2024-08-28 10:52:07"}
{"level":"error","message":"Error creating PaymentIntent: The parameter `return_url` cannot be passed when creating a PaymentIntent unless `confirm` is set to true.","service":"user-service","timestamp":"2024-08-28 10:52:08"}
{"level":"error","message":"Error in deposit: Failed to create PaymentIntent: The parameter `return_url` cannot be passed when creating a PaymentIntent unless `confirm` is set to true.","service":"user-service","stack":"Error: Failed to create PaymentIntent: The parameter `return_url` cannot be passed when creating a PaymentIntent unless `confirm` is set to true.\n    at Function.createPaymentIntent (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\service\\stripe.service.ts:53:10)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Function.deposit (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\service\\wallet.service.ts:109:20)\n    at async WalletController.deposit (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\controller\\wallet.controller.ts:250:19)","timestamp":"2024-08-28 10:52:08"}
{"level":"info","message":"Using MailHog for email testing","service":"user-service","timestamp":"2024-08-28 10:52:34"}
{"level":"info","message":"Email templates loaded successfully","service":"user-service","timestamp":"2024-08-28 10:52:34"}
{"level":"info","message":"Creating PaymentIntent: amount=100000, currency=usd, customerId=cus_Qk5HycccQCbH4o, paymentMethodId=undefined","service":"user-service","timestamp":"2024-08-28 10:52:50"}
{"level":"error","message":"Error creating PaymentIntent: You cannot confirm this PaymentIntent because it's missing a payment method. You can either update the PaymentIntent with a payment method and then confirm it again, or confirm it again directly with a payment method or ConfirmationToken.","service":"user-service","timestamp":"2024-08-28 10:52:51"}
{"level":"error","message":"Error in deposit: Failed to create PaymentIntent: You cannot confirm this PaymentIntent because it's missing a payment method. You can either update the PaymentIntent with a payment method and then confirm it again, or confirm it again directly with a payment method or ConfirmationToken.","service":"user-service","stack":"Error: Failed to create PaymentIntent: You cannot confirm this PaymentIntent because it's missing a payment method. You can either update the PaymentIntent with a payment method and then confirm it again, or confirm it again directly with a payment method or ConfirmationToken.\n    at Function.createPaymentIntent (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\service\\stripe.service.ts:55:10)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Function.deposit (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\service\\wallet.service.ts:109:20)\n    at async WalletController.deposit (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\controller\\wallet.controller.ts:250:19)","timestamp":"2024-08-28 10:52:51"}
{"level":"info","message":"Using MailHog for email testing","service":"user-service","timestamp":"2024-08-28 10:55:09"}
{"level":"info","message":"Email templates loaded successfully","service":"user-service","timestamp":"2024-08-28 10:55:09"}
{"level":"info","message":"Email sent to admintest@gmail.com using template verification","service":"user-service","timestamp":"2024-08-28 10:55:14"}
{"level":"info","message":"Verification email sent successfully to admintest@gmail.com","service":"user-service","timestamp":"2024-08-28 10:55:14"}
{"level":"info","message":"KYC initiated for user 66ce9192949c76ad12829a91. Auto-approve: false","service":"user-service","timestamp":"2024-08-28 10:55:51"}
{"level":"info","message":"Document uploaded and stored as Base64 for user 66ce9192949c76ad12829a91","service":"user-service","timestamp":"2024-08-28 10:55:53"}
{"level":"info","message":"Created Stripe customer for email: admintest@gmail.com","service":"user-service","timestamp":"2024-08-28 10:56:50"}
{"level":"info","message":"Transaction created: 66ce91f2949c76ad12829aae","service":"user-service","timestamp":"2024-08-28 10:56:50"}
{"level":"info","message":"Wallet created for user 66ce9192949c76ad12829a91 with initial balance 1000","service":"user-service","timestamp":"2024-08-28 10:56:50"}
{"level":"info","message":"Attached payment method pm_card_mastercard to customer cus_Qk6GefQgJsHij5","service":"user-service","timestamp":"2024-08-28 10:57:00"}
{"level":"info","message":"Creating PaymentIntent: amount=100000, currency=usd, customerId=cus_Qk6GefQgJsHij5, paymentMethodId=undefined","service":"user-service","timestamp":"2024-08-28 10:57:06"}
{"level":"error","message":"Error creating PaymentIntent: You cannot confirm this PaymentIntent because it's missing a payment method. You can either update the PaymentIntent with a payment method and then confirm it again, or confirm it again directly with a payment method or ConfirmationToken.","service":"user-service","timestamp":"2024-08-28 10:57:06"}
{"level":"error","message":"Error in deposit: Failed to create PaymentIntent: You cannot confirm this PaymentIntent because it's missing a payment method. You can either update the PaymentIntent with a payment method and then confirm it again, or confirm it again directly with a payment method or ConfirmationToken.","service":"user-service","stack":"Error: Failed to create PaymentIntent: You cannot confirm this PaymentIntent because it's missing a payment method. You can either update the PaymentIntent with a payment method and then confirm it again, or confirm it again directly with a payment method or ConfirmationToken.\n    at Function.createPaymentIntent (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\service\\stripe.service.ts:55:10)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Function.deposit (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\service\\wallet.service.ts:109:20)\n    at async WalletController.deposit (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\controller\\wallet.controller.ts:250:19)","timestamp":"2024-08-28 10:57:06"}
{"level":"info","message":"Using MailHog for email testing","service":"user-service","timestamp":"2024-08-28 11:00:12"}
{"level":"info","message":"Email templates loaded successfully","service":"user-service","timestamp":"2024-08-28 11:00:13"}
{"level":"info","message":"Creating PaymentIntent: amount=100000, currency=usd, customerId=cus_Qk6GefQgJsHij5, paymentMethodId=undefined","service":"user-service","timestamp":"2024-08-28 11:00:23"}
{"level":"info","message":"PaymentIntent created: {\"id\":\"pi_3Psc7ORovDgm5eik1vChoQwk\",\"object\":\"payment_intent\",\"amount\":10000000,\"amount_capturable\":0,\"amount_details\":{\"tip\":{}},\"amount_received\":0,\"application\":null,\"application_fee_amount\":null,\"automatic_payment_methods\":{\"allow_redirects\":\"always\",\"enabled\":true},\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic_async\",\"client_secret\":\"pi_3Psc7ORovDgm5eik1vChoQwk_secret_uFBHh8XPyTW6tDn5fM7yNrgro\",\"confirmation_method\":\"manual\",\"created\":1724814022,\"currency\":\"usd\",\"customer\":\"cus_Qk6GefQgJsHij5\",\"description\":null,\"invoice\":null,\"last_payment_error\":null,\"latest_charge\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":null,\"payment_method_configuration_details\":null,\"payment_method_options\":{\"card\":{\"installments\":null,\"mandate_options\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"processing\":null,\"receipt_email\":null,\"review\":null,\"setup_future_usage\":\"off_session\",\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"requires_payment_method\",\"transfer_data\":null,\"transfer_group\":null}","service":"user-service","timestamp":"2024-08-28 11:00:24"}
{"level":"info","message":"Confirmed PaymentIntent: pi_3Psc7ORovDgm5eik1vChoQwk","service":"user-service","timestamp":"2024-08-28 11:00:25"}
{"level":"info","message":"Transaction created: 66ce92c939b444e54d11b3ca","service":"user-service","timestamp":"2024-08-28 11:00:25"}
{"level":"error","message":"Error confirming PaymentIntent: You cannot confirm this PaymentIntent because it has already succeeded after being previously confirmed.","service":"user-service","timestamp":"2024-08-28 11:02:39"}
{"level":"info","message":"Using MailHog for email testing","service":"user-service","timestamp":"2024-08-28 11:05:03"}
{"level":"info","message":"Email templates loaded successfully","service":"user-service","timestamp":"2024-08-28 11:05:04"}
{"level":"info","message":"Using MailHog for email testing","service":"user-service","timestamp":"2024-08-28 11:05:31"}
{"level":"info","message":"Email templates loaded successfully","service":"user-service","timestamp":"2024-08-28 11:05:32"}
{"level":"info","message":"Creating PaymentIntent: amount=100000, currency=usd, customerId=cus_Qk6GefQgJsHij5, paymentMethodId=undefined","service":"user-service","timestamp":"2024-08-28 11:06:03"}
{"level":"info","message":"PaymentIntent created: {\"id\":\"pi_3PscCsRovDgm5eik1ToLu1J8\",\"object\":\"payment_intent\",\"amount\":1000,\"amount_capturable\":0,\"amount_details\":{\"tip\":{}},\"amount_received\":0,\"application\":null,\"application_fee_amount\":null,\"automatic_payment_methods\":{\"allow_redirects\":\"always\",\"enabled\":true},\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic_async\",\"client_secret\":\"pi_3PscCsRovDgm5eik1ToLu1J8_secret_Of0xk49Dqz4IuCTE9XuhtE1dK\",\"confirmation_method\":\"manual\",\"created\":1724814362,\"currency\":\"usd\",\"customer\":\"cus_Qk6GefQgJsHij5\",\"description\":null,\"invoice\":null,\"last_payment_error\":null,\"latest_charge\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":null,\"payment_method_configuration_details\":null,\"payment_method_options\":{\"card\":{\"installments\":null,\"mandate_options\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"processing\":null,\"receipt_email\":null,\"review\":null,\"setup_future_usage\":\"off_session\",\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"requires_payment_method\",\"transfer_data\":null,\"transfer_group\":null}","service":"user-service","timestamp":"2024-08-28 11:06:04"}
{"level":"info","message":"Confirmed PaymentIntent: pi_3PscCsRovDgm5eik1ToLu1J8","service":"user-service","timestamp":"2024-08-28 11:06:05"}
{"level":"info","message":"Transaction created: 66ce941dc80789f7834dc7fc","service":"user-service","timestamp":"2024-08-28 11:06:05"}
{"level":"error","message":"Error confirming PaymentIntent: You cannot confirm this PaymentIntent because it has already succeeded after being previously confirmed.","service":"user-service","timestamp":"2024-08-28 11:06:15"}
{"level":"info","message":"Creating PaymentIntent: amount=100000, currency=usd, customerId=cus_Qk6GefQgJsHij5, paymentMethodId=undefined","service":"user-service","timestamp":"2024-08-28 11:06:57"}
{"level":"info","message":"PaymentIntent created: {\"id\":\"pi_3PscDkRovDgm5eik1ITh3zwp\",\"object\":\"payment_intent\",\"amount\":1000,\"amount_capturable\":0,\"amount_details\":{\"tip\":{}},\"amount_received\":0,\"application\":null,\"application_fee_amount\":null,\"automatic_payment_methods\":{\"allow_redirects\":\"always\",\"enabled\":true},\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic_async\",\"client_secret\":\"pi_3PscDkRovDgm5eik1ITh3zwp_secret_zVfo2eMCPJpoMFvzFCTzx9qwN\",\"confirmation_method\":\"manual\",\"created\":1724814416,\"currency\":\"usd\",\"customer\":\"cus_Qk6GefQgJsHij5\",\"description\":null,\"invoice\":null,\"last_payment_error\":null,\"latest_charge\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":null,\"payment_method_configuration_details\":null,\"payment_method_options\":{\"card\":{\"installments\":null,\"mandate_options\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"processing\":null,\"receipt_email\":null,\"review\":null,\"setup_future_usage\":\"off_session\",\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"requires_payment_method\",\"transfer_data\":null,\"transfer_group\":null}","service":"user-service","timestamp":"2024-08-28 11:06:58"}
{"level":"info","message":"Confirmed PaymentIntent: pi_3PscDkRovDgm5eik1ITh3zwp","service":"user-service","timestamp":"2024-08-28 11:06:59"}
{"level":"info","message":"Transaction created: 66ce9453c80789f7834dc806","service":"user-service","timestamp":"2024-08-28 11:06:59"}
{"level":"info","message":"Using MailHog for email testing","service":"user-service","timestamp":"2024-08-28 11:07:46"}
{"level":"info","message":"Email templates loaded successfully","service":"user-service","timestamp":"2024-08-28 11:07:47"}
{"level":"info","message":"Using MailHog for email testing","service":"user-service","timestamp":"2024-08-28 11:08:16"}
{"level":"info","message":"Email templates loaded successfully","service":"user-service","timestamp":"2024-08-28 11:08:16"}
{"level":"info","message":"Creating PaymentIntent: amount=100000, currency=usd, customerId=cus_Qk6GefQgJsHij5, paymentMethodId=undefined","service":"user-service","timestamp":"2024-08-28 11:08:35"}
{"level":"info","message":"PaymentIntent created: {\"id\":\"pi_3PscFLRovDgm5eik0N3wUX15\",\"object\":\"payment_intent\",\"amount\":1000,\"amount_capturable\":0,\"amount_details\":{\"tip\":{}},\"amount_received\":0,\"application\":null,\"application_fee_amount\":null,\"automatic_payment_methods\":{\"allow_redirects\":\"always\",\"enabled\":true},\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic_async\",\"client_secret\":\"pi_3PscFLRovDgm5eik0N3wUX15_secret_qfyW5p6qGa0uKmkOcSTrw1W4V\",\"confirmation_method\":\"manual\",\"created\":1724814515,\"currency\":\"usd\",\"customer\":\"cus_Qk6GefQgJsHij5\",\"description\":null,\"invoice\":null,\"last_payment_error\":null,\"latest_charge\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":null,\"payment_method_configuration_details\":null,\"payment_method_options\":{\"card\":{\"installments\":null,\"mandate_options\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"processing\":null,\"receipt_email\":null,\"review\":null,\"setup_future_usage\":\"off_session\",\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"requires_payment_method\",\"transfer_data\":null,\"transfer_group\":null}","service":"user-service","timestamp":"2024-08-28 11:08:36"}
{"level":"error","message":"Error in deposit: Deposit failed","service":"user-service","stack":"Error: Deposit failed\n    at Function.deposit (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\service\\wallet.service.ts:141:11)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async WalletController.deposit (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\controller\\wallet.controller.ts:250:19)","timestamp":"2024-08-28 11:08:36"}
{"level":"info","message":"Using MailHog for email testing","service":"user-service","timestamp":"2024-08-28 11:12:58"}
{"level":"info","message":"Email templates loaded successfully","service":"user-service","timestamp":"2024-08-28 11:12:58"}
{"level":"error","message":"Error confirming PaymentIntent: You cannot confirm this PaymentIntent because it has already succeeded after being previously confirmed.","service":"user-service","timestamp":"2024-08-28 11:13:10"}
{"level":"info","message":"Creating PaymentIntent: amount=100000, currency=usd, customerId=cus_Qk6GefQgJsHij5, paymentMethodId=pm_card_mastercard","service":"user-service","timestamp":"2024-08-28 11:14:13"}
{"level":"info","message":"PaymentIntent created: {\"id\":\"pi_3PscKmRovDgm5eik0tva4JjG\",\"object\":\"payment_intent\",\"amount\":1000,\"amount_capturable\":0,\"amount_details\":{\"tip\":{}},\"amount_received\":0,\"application\":null,\"application_fee_amount\":null,\"automatic_payment_methods\":{\"allow_redirects\":\"always\",\"enabled\":true},\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic_async\",\"client_secret\":\"pi_3PscKmRovDgm5eik0tva4JjG_secret_Lkfg6TuaK4qLOlmBsfIKaQEYx\",\"confirmation_method\":\"manual\",\"created\":1724814852,\"currency\":\"usd\",\"customer\":\"cus_Qk6GefQgJsHij5\",\"description\":null,\"invoice\":null,\"last_payment_error\":null,\"latest_charge\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":\"pm_1PscKmRovDgm5eikedKbST3X\",\"payment_method_configuration_details\":null,\"payment_method_options\":{\"card\":{\"installments\":null,\"mandate_options\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"processing\":null,\"receipt_email\":null,\"review\":null,\"setup_future_usage\":\"off_session\",\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"requires_confirmation\",\"transfer_data\":null,\"transfer_group\":null}","service":"user-service","timestamp":"2024-08-28 11:14:14"}
{"level":"info","message":"Transaction created: 66ce9606185b8d1019460c27","service":"user-service","timestamp":"2024-08-28 11:14:14"}
{"level":"info","message":"Confirmed PaymentIntent: pi_3PscKmRovDgm5eik0tva4JjG","service":"user-service","timestamp":"2024-08-28 11:14:25"}
{"level":"info","message":"Transaction created: 66ce9611185b8d1019460c2e","service":"user-service","timestamp":"2024-08-28 11:14:25"}
{"level":"info","message":"Using MailHog for email testing","service":"user-service","timestamp":"2024-08-28 11:17:59"}
{"level":"info","message":"Email templates loaded successfully","service":"user-service","timestamp":"2024-08-28 11:17:59"}
{"level":"info","message":"Email sent to test5@gmail.com using template verification","service":"user-service","timestamp":"2024-08-28 11:18:10"}
{"level":"info","message":"Verification email sent successfully to test5@gmail.com","service":"user-service","timestamp":"2024-08-28 11:18:10"}
{"level":"info","message":"KYC initiated for user 66ce96f15cd17bfd4996721f. Auto-approve: false","service":"user-service","timestamp":"2024-08-28 11:20:37"}
{"level":"info","message":"Document uploaded and stored as Base64 for user 66ce96f15cd17bfd4996721f","service":"user-service","timestamp":"2024-08-28 11:21:03"}
{"level":"info","message":"Using MailHog for email testing","service":"user-service","timestamp":"2024-08-28 11:23:07"}
{"level":"info","message":"Email templates loaded successfully","service":"user-service","timestamp":"2024-08-28 11:23:08"}
{"level":"error","message":"Error in createWallet: User already has a wallet","service":"user-service","stack":"Error: User already has a wallet\n    at Function.createWallet (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\service\\wallet.service.ts:61:11)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async WalletController.createWallet (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\controller\\wallet.controller.ts:18:19)","timestamp":"2024-08-28 11:25:27"}
{"level":"info","message":"Email sent to user@gmail.com using template verification","service":"user-service","timestamp":"2024-08-28 11:31:35"}
{"level":"info","message":"Verification email sent successfully to user@gmail.com","service":"user-service","timestamp":"2024-08-28 11:31:35"}
{"0":"P","1":"l","10":"i","11":"f","12":"y","13":" ","14":"y","15":"o","16":"u","17":"r","18":" ","19":"e","2":"e","20":"m","21":"a","22":"i","23":"l","24":" ","25":"b","26":"e","27":"f","28":"o","29":"r","3":"a","30":"e","31":" ","32":"l","33":"o","34":"g","35":"g","36":"i","37":"n","38":"g","39":" ","4":"s","40":"i","41":"n","42":".","43":" ","44":"C","45":"h","46":"e","47":"c","48":"k","49":" ","5":"e","50":"y","51":"o","52":"u","53":"r","54":" ","55":"i","56":"n","57":"b","58":"o","59":"x","6":" ","60":" ","61":"f","62":"o","63":"r","64":" ","65":"t","66":"h","67":"e","68":" ","69":"v","7":"v","70":"e","71":"r","72":"i","73":"f","74":"i","75":"c","76":"a","77":"t","78":"i","79":"o","8":"e","80":"n","81":" ","82":"l","83":"i","84":"n","85":"k","86":".","9":"r","level":"error","message":"Error in user login:","service":"user-service","timestamp":"2024-08-28 11:32:11"}
{"level":"info","message":"Created Stripe customer for email: admintest@gmail.com","service":"user-service","timestamp":"2024-08-28 11:33:01"}
{"level":"info","message":"Transaction created: 66ce9a6db6eb8e7d9ae141fa","service":"user-service","timestamp":"2024-08-28 11:33:01"}
{"level":"info","message":"Wallet created for user 66ce9192949c76ad12829a91 with initial balance 1000","service":"user-service","timestamp":"2024-08-28 11:33:01"}
{"level":"info","message":"Email sent to useruseruser@gmail.com using template verification","service":"user-service","timestamp":"2024-08-28 11:33:52"}
{"level":"info","message":"Verification email sent successfully to useruseruser@gmail.com","service":"user-service","timestamp":"2024-08-28 11:33:52"}
{"level":"info","message":"KYC initiated for user 66ce9a17b6eb8e7d9ae141ee. Auto-approve: false","service":"user-service","timestamp":"2024-08-28 11:34:14"}
{"level":"info","message":"Document uploaded and stored as Base64 for user 66ce9a17b6eb8e7d9ae141ee","service":"user-service","timestamp":"2024-08-28 11:34:17"}
{"0":"A","1":"n","10":"s","11":"e","12":"r","13":" ","14":"a","15":"l","16":"r","17":"e","18":"a","19":"d","2":" ","20":"y","21":" ","22":"e","23":"x","24":"i","25":"s","26":"t","27":"s","3":"a","4":"d","5":"m","6":"i","7":"n","8":" ","9":"u","level":"error","message":"Error in admin setup:","service":"user-service","timestamp":"2024-08-28 11:35:28"}
{"level":"info","message":"Email sent to adminadminadmin@gmail.com using template verification","service":"user-service","timestamp":"2024-08-28 11:36:08"}
{"level":"info","message":"Verification email sent successfully to adminadminadmin@gmail.com","service":"user-service","timestamp":"2024-08-28 11:36:08"}
{"level":"error","message":"Error in createWallet: KYC verification is not approved. Cannot create wallet.","service":"user-service","stack":"Error: KYC verification is not approved. Cannot create wallet.\n    at Function.createWallet (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\service\\wallet.service.ts:55:11)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async WalletController.createWallet (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\controller\\wallet.controller.ts:18:19)","timestamp":"2024-08-28 11:39:03"}
{"level":"error","message":"Error in createWallet: KYC verification is not approved. Cannot create wallet.","service":"user-service","stack":"Error: KYC verification is not approved. Cannot create wallet.\n    at Function.createWallet (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\service\\wallet.service.ts:55:11)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async WalletController.createWallet (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\controller\\wallet.controller.ts:18:19)","timestamp":"2024-08-28 11:41:06"}
{"level":"error","message":"Error in createWallet: KYC verification is not approved. Cannot create wallet.","service":"user-service","stack":"Error: KYC verification is not approved. Cannot create wallet.\n    at Function.createWallet (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\service\\wallet.service.ts:55:11)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async WalletController.createWallet (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\controller\\wallet.controller.ts:18:19)","timestamp":"2024-08-28 11:41:22"}
{"level":"error","message":"Error in createWallet: KYC verification is not approved. Cannot create wallet.","service":"user-service","stack":"Error: KYC verification is not approved. Cannot create wallet.\n    at Function.createWallet (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\service\\wallet.service.ts:55:11)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async WalletController.createWallet (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\controller\\wallet.controller.ts:18:19)","timestamp":"2024-08-28 11:42:05"}
{"level":"info","message":"KYC initiated for user 66ce9b28b6eb8e7d9ae14210. Auto-approve: false","service":"user-service","timestamp":"2024-08-28 11:42:10"}
{"level":"info","message":"Document uploaded and stored as Base64 for user 66ce9b28b6eb8e7d9ae14210","service":"user-service","timestamp":"2024-08-28 11:42:11"}
{"level":"info","message":"Created Stripe customer for email: adminadminadmin@gmail.com","service":"user-service","timestamp":"2024-08-28 11:42:30"}
{"level":"info","message":"Transaction created: 66ce9ca6b6eb8e7d9ae1423b","service":"user-service","timestamp":"2024-08-28 11:42:30"}
{"level":"info","message":"Wallet created for user 66ce9b28b6eb8e7d9ae14210 with initial balance 1000","service":"user-service","timestamp":"2024-08-28 11:42:30"}
{"level":"info","message":"Payment method pm_card_mastercard already exists for user 66ce9b28b6eb8e7d9ae14210","service":"user-service","timestamp":"2024-08-28 11:42:52"}
{"level":"error","message":"Error in deposit: Payment method not found or does not belong to this user","service":"user-service","stack":"Error: Payment method not found or does not belong to this user\n    at Function.deposit (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\service\\wallet.service.ts:105:11)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async WalletController.deposit (C:\\Users\\Elijah\\Desktop\\Elijah\\Code\\NodeMommy\\user-service\\src\\controller\\wallet.controller.ts:250:19)","timestamp":"2024-08-28 11:43:02"}
{"level":"info","message":"Attached payment method pm_card_mastercard to customer cus_Qk70GjELOCPw70","service":"user-service","timestamp":"2024-08-28 11:43:27"}
{"level":"info","message":"Creating PaymentIntent: amount=100000, currency=usd, customerId=cus_Qk70GjELOCPw70, paymentMethodId=pm_card_mastercard","service":"user-service","timestamp":"2024-08-28 11:43:33"}
{"level":"info","message":"PaymentIntent created: {\"id\":\"pi_3PscnARovDgm5eik1qg9esDZ\",\"object\":\"payment_intent\",\"amount\":1000,\"amount_capturable\":0,\"amount_details\":{\"tip\":{}},\"amount_received\":0,\"application\":null,\"application_fee_amount\":null,\"automatic_payment_methods\":{\"allow_redirects\":\"always\",\"enabled\":true},\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic_async\",\"client_secret\":\"pi_3PscnARovDgm5eik1qg9esDZ_secret_K8tniQgUULE0C1HnC2UBfgyTE\",\"confirmation_method\":\"manual\",\"created\":1724816612,\"currency\":\"usd\",\"customer\":\"cus_Qk70GjELOCPw70\",\"description\":null,\"invoice\":null,\"last_payment_error\":null,\"latest_charge\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":\"pm_1PscnARovDgm5eikcm4fIxOz\",\"payment_method_configuration_details\":null,\"payment_method_options\":{\"card\":{\"installments\":null,\"mandate_options\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"processing\":null,\"receipt_email\":null,\"review\":null,\"setup_future_usage\":\"off_session\",\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"requires_confirmation\",\"transfer_data\":null,\"transfer_group\":null}","service":"user-service","timestamp":"2024-08-28 11:43:34"}
{"level":"info","message":"Transaction created: 66ce9ce6b6eb8e7d9ae1424d","service":"user-service","timestamp":"2024-08-28 11:43:34"}
{"level":"info","message":"Confirmed PaymentIntent: pi_3PscnARovDgm5eik1qg9esDZ","service":"user-service","timestamp":"2024-08-28 11:44:06"}
{"level":"info","message":"Transaction created: 66ce9d06b6eb8e7d9ae14254","service":"user-service","timestamp":"2024-08-28 11:44:07"}
